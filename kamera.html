<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memindai... - ULOSIFY</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<!-- 
  PERUBAHAN: Body tidak lagi bg-slate-900.
  Kita gunakan flex flex-col h-screen untuk struktur.
-->
<body class="bg-slate-100 flex flex-col h-screen">

    <!-- Navbar (Tetap konsisten) -->
    <nav class="sticky top-0 z-50 w-full bg-white/95 backdrop-blur-md shadow-sm">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-3xl font-extrabold text-indigo-600">ULOSIFY</a>
            <div class="hidden md:flex items-center space-x-8">
                <a href="index.html" class="font-medium text-slate-600 hover:text-indigo-600 transition-colors duration-300">Beranda</a>
                <a href="pasar.html" class="font-medium text-slate-600 hover:text-indigo-600 transition-colors duration-300">Pasar Ulos</a>
                <a href="peta.html" class="font-medium text-slate-600 hover:text-indigo-600 transition-colors duration-300">Peta Penenun</a>
                <a href="login.html" class="bg-indigo-600 text-white font-semibold px-6 py-2 rounded-full hover:bg-indigo-700 transition-all duration-300 shadow-md hover:shadow-lg">Masuk</a>
            </div>
            <div class="md:hidden">
                <button id="mobile-menu-button" class="text-slate-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16m-7 6h7" /></svg></button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2">
            <a href="index.html" class="block font-medium text-slate-600 hover:text-indigo-600 py-2">Beranda</a>
            <a href="pasar.html" class="block font-medium text-slate-600 hover:text-indigo-600 py-2">Pasar Ulos</a>
            <a href="peta.html" class="block font-medium text-slate-600 hover:text-indigo-600 py-2">Peta Penenun</a>
            <a href="login.html" class="block bg-indigo-600 text-white font-semibold px-6 py-2 rounded-full mt-2 text-center">Masuk</a>
        </div>
    </nav>

    <!-- 
      PERUBAHAN: Konten Kamera (Main)
      - Dibuat flex-1 untuk mengisi sisa layar.
      - 'items-center justify-center' untuk memusatkan bingkai di desktop.
      - 'bg-slate-100' sebagai latar belakang halaman.
    -->
    <main class="flex-1 flex items-center justify-center py-8 md:py-12">
        
        <!-- 
          PERUBAHAN: Bingkai Kontainer Kamera
          - Di mobile (default): w-full h-full (mengisi 'main').
          - Di tablet/desktop (md:): Dibatasi ukurannya (misal: w-[400px] h-[800px]),
            diberi rounded-3xl dan shadow-2xl untuk simulasi perangkat.
        -->
        <div class="relative w-full h-full md:w-[400px] md:h-[800px] md:max-h-[80vh] md:rounded-3xl md:shadow-2xl overflow-hidden bg-black">
        
            <!-- 
              Elemen <video> untuk feed kamera.
              Posisinya absolut untuk mengisi bingkai kontainer di atas.
            -->
            <video id="camera-view" autoplay playsinline muted class="absolute top-0 left-0 w-full h-full object-cover"></video>

            <!-- 
              PERUBAHAN: Bilah Kontrol Atas (Baru)
              - Tampilan 'frosted glass'
            -->
            <div class="absolute top-0 left-0 w-full z-10 p-5 flex justify-between items-center bg-gradient-to-b from-black/50 to-transparent">
                <!-- Ikon Flash (Palsu) -->
                <button class="text-white/80 hover:text-white transition-opacity">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                </button>
                <!-- Tombol Tutup (Kembali ke scan.html) -->
                <a href="scan.html" class="text-white/80 hover:text-white transition-opacity">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </a>
            </div>

            <!-- 
              PERUBAHAN: Bingkai Target Pindai (Reticle)
              - Mengganti 4 sudut dengan reticle bulat yang lebih halus.
            -->
            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10 w-3/4 max-w-sm aspect-square">
                <!-- Reticle luar dengan animasi pulse -->
                <div class="w-full h-full rounded-full border-2 border-white/40 animate-pulse"></div>
                <!-- Reticle dalam yang solid -->
                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-3/4 h-3/4 rounded-full border border-white/80"></div>
                <!-- Titik tengah -->
                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-white/80 rounded-full"></div>
            </div>
            
            <!-- 
              PERUBAHAN: Bilah Kontrol Bawah
              - Tampilan 'frosted glass'
              - Penambahan ikon galeri & balik kamera
            -->
            <div class="absolute bottom-0 left-0 w-full z-10 p-6 md:p-8 bg-gradient-to-t from-black/50 to-transparent backdrop-blur-sm">
                <div class="flex justify-between items-center">
                    
                    <!-- Ikon Galeri (Palsu) -->
                    <button class="text-white/80 hover:text-white transition-opacity">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                    </button>

                    <!-- Tombol Shutter (Asli, link ke hasil-scan.html) -->
                    <a href="hasil-scan.html" class="block w-20 h-20 rounded-full bg-white shadow-2xl transition-all duration-300 transform active:scale-90 hover:opacity-90">
                        <span class="block w-full h-full rounded-full border-[6px] border-white/50 ring-4 ring-offset-2 ring-offset-transparent ring-white"></span>
                    </a>
                    
                    <!-- Ikon Balik Kamera (Palsu) - PERUBAHAN DI SINI -->
                    <button class="text-white/80 hover:text-white transition-opacity">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                          <!-- Path SVG diganti dengan ikon 'switch-horizontal' yang lebih bersih -->
                          <path stroke-linecap="round" stroke-linejoin="round" d="M8 7h12m0 0l-4-4m4 4l-4 4m-4 6H4m0 0l4 4m-4-4l4-4" />
                        </svg>
                    </button>

                </div>
            </div>

        </div> <!-- Akhir dari Bingkai Kontainer Kamera -->

    </main>
    
    <!-- Script untuk Mobile Menu -->
    <script>
        document.getElementById('mobile-menu-button').onclick = function() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        };

        // --- Script untuk mengaktifkan kamera (Tidak berubah) ---
        
        const videoElement = document.getElementById('camera-view');

        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia({ 
                video: { 
                    facingMode: 'environment' 
                } 
            })
            .then(function(stream) {
                videoElement.srcObject = stream;
                videoElement.play();
            })
            .catch(function(err) {
                console.error("Kamera belakang tidak dapat diakses:", err);
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(function(stream) {
                        videoElement.srcObject = stream;
                        videoElement.play();
                    })
                    .catch(function(err) {
                        console.error("Semua kamera gagal diakses:", err);
                        alert("Tidak bisa mengakses kamera. Pastikan Anda memberi izin.");
                    });
            });
        } else {
            console.error("getUserMedia tidak didukung di browser ini.");
            alert("Browser Anda tidak mendukung akses kamera.");
        }
        // --- Akhir dari Script Kamera ---
    </script>

</body>
</html>